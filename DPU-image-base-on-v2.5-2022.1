	1. Follow DPU-IP vitis-work-flow:

	• E:\res\DPUCZDX8G\DPUCZDX8G\prj\Vitis\README.md

	• Make platform by:
	E:\res\DPUCZDX8G\DPUCZDX8G\prj\Vitis\platforms\README.md
	
	• Install common_image:
	•  export EDGE_COMMON_SW=<mpsoc common system>/xilinx-zynqmp-common-v2022.1
	
	
	• Make platform by:
	E:\res\DPUCZDX8G\DPUCZDX8G\prj\Vitis\platforms\README.md
	
	• make all KERNEL=DPU DEVICE=zcu104

	• Copy "sd_card.img" and download in SD CARD


	• Run resnet50 example
	
	env LD_LIBRARY_PATH=/home/root/app/samples/lib XLNX_VART_FIRMWARE=/run/media/mmcblk0p1/dpu.xclbin samples/bin/resnet50 images/001.jpg XLNX_ENABLE_FINGERPRINT_CHECK=0

	not:
 	1) "images/001.jpg" can be found in: C:\Users\user\Downloads\vitis_ai_runtime_r2.5.0_image_video\images
  	2) "XLNX_ENABLE_FINGERPRINT_CHECK=0" can ignore these errors:
         W1119 17:21:40.170575   596 dpu_runner_base_imp.cpp:676] CHECK fingerprint fail ! model_fingerprint 
         0x101000016010407 dpu_fingerprint 0x101000017010407
        F1119 17:21:40.170719   596 dpu_runner_base_imp.cpp:648] fingerprint check failure.
        *** Check failure stack trace: ***
 	3) the above error means: 
         When running a DPU based application, the fingerprint error happens when there is an architecture mismatch between the DPU in the platform and the compiled XMODEL. If you want to solve this, please follow:https://xilinx.eetrend.com/content/2023/100576175.html


	
	


	 








1、创建Vitis Platform--Vivado工程_哔哩哔哩_bilibili

Vitis-Tutorials/Vitis_Platform_Creation/Design_Tutorials/02-Edge-AI-ZCU104/step1.md at 2022.1 · Xilinx/Vitis-Tutorials (github.com)





2、创建Vitis Platform--Petalinux工程_哔哩哔哩_bilibili

Vitis-Tutorials/Vitis_Platform_Creation/Feature_Tutorials/02_petalinux_customization/README.md at 2022.1 · Xilinx/Vitis-Tutorials (github.com)


There are two ways to install the dependent libraries of Vitis-AI. One is to rebuild the system by configuring PetaLinux and the other is to install the Vitis-AI online via dnf.
	Build-Time
For VAI2.5 Recipes, refer to Vitis-AI-Recipes.


To rebuild the system by configuring PetaLinux
If users want to install VAI2.5 into rootfs when generating system image by PetaLinux, users need to get the VAI2.5 recipes. Users can get recipes of VAI2.5 by the following two ways.

Using recipes-vitis-ai in this repo.
Upgrading PetaLinux esdk.
How to use recipes-vitis-ai
Note
recipes-vitis-ai enables Vitis flow by default. If want to use it in vivado flow, please comment the following line in recipes-vitis-ai/vart/vart_2.5.bb

#PACKAGECONFIG_append = " vitis"

Copy recipes-vitis-ai folder to <petalinux project>/project-spec/meta-user/
cp Vitis-AI/setup/petalinux/recipes-vitis-ai <petalinux project>/project-spec/meta-user/
Edit <petalinux project>/project-spec/meta-user/conf/user-rootfsconfig file, appending the following lines:
CONFIG_vitis-ai-library
CONFIG_vitis-ai-library-dev
CONFIG_vitis-ai-library-dbg
Source PetaLinux tool and run petalinux-config -c rootfs command. Select the following option.
Select user packages --->
Select [*] vitis-ai-library
Then, save it and exit.


Note the following:

If you want to compile the example on the target, please select the vitis-ai-library-dev and packagegroup-petalinux-self-hosted. Then, recompile the system.

If you want to use vaitracer tool, please select the vitis-ai-library-dbg. And copy recipes-vai-kernel folder to <petalinux project>/project-spec/meta-user/. Then, recompile the system.

cp Vitis-AI/setup/petalinux/recipes-vai-kernel <petalinux project>/project-spec/meta-user/



Run petalinux-build

After you run the above successfully, the vitis-ai-library, VART2.5 and the dependent packages will all be installed into rootfs image.
